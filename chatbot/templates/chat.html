<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BiblioTech</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Rowdies:wght@300;400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='books.css') }}">
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="icon" type="image/x-icon"
        href="{{ url_for('static', filename='imagens/question-mark.png') }}">
</head>

<body>
    <header>
        <div class="logo-container">
            <h1>BiblioTech</h1>
        </div>
        <div class="input-container">
            <input type="text" placeholder="Busque por título, autor, editora..." class="text-box">
        </div>
        <div class="entrar-container">
            <button class="botao">Entrar</button>
        </div>
    </header>

    <!-- Chat integrado AGORA FICA ACIMA -->
    <div class="chat-container">
        <h2>Chat Literário</h2>
        <form action="/" method="POST" class="chat-form">
            <input type="text" name="pergunta" placeholder="Pergunte sobre um livro, autor ou tema..." required>
            <button type="submit">Enviar</button>
        </form>

        <div class="chat-respostas">
            {% if conversas %}
                {% for pergunta, resposta in conversas %}
                    <div class="mensagem usuario">
                        <strong>Você:</strong> {{ pergunta }}
                    </div>
                    <div class="mensagem bot">
                        <strong>BiblioTech:</strong> {{ resposta|safe }}
                    </div>
                {% endfor %}
            {% else %}
                <p class="chat-placeholder">Faça sua primeira pergunta sobre livros!</p>
            {% endif %}
        </div>

        <form action="/limpar" method="POST">
            <button type="submit" class="botao-limpar">Limpar conversa</button>
        </form>
    </div>

    <!-- Cards AGORA FICAM ABAIXO -->
    <div class="container-cards">
        <div class="card">
            <div class="card-imagem">
                <img src="{{ url_for('static', filename='imagens/a_biblioteca_da_meia_noite_1_1_1f6b6a32c1687099457ef952eff2fe5a.webp') }}"
                    alt="Biblioteca da Meia Noite">
            </div>
            <div class="card-conteudo">
                <h2 class="card-titulo">A biblioteca da meia noite</h2>
                <h3 class="card-subtitulo">Matt Haig</h3>
                <p class="card-descricao">Nora Seed ganha a chance de voltar no tempo e desfazer arrependimentos em diferentes vidas.</p>
                <a href="#" class="card-botao"><i class="fa-solid fa-cart-shopping"></i> Comprar Livro</a>
            </div>
        </div>

        <div class="card">
            <div class="card-imagem">
                <img src="{{ url_for('static', filename='imagens/domcasmurro.jpg') }}" alt="Dom Casmurro">
            </div>
            <div class="card-conteudo">
                <h2 class="card-titulo">Dom Casmurro</h2>
                <h3 class="card-subtitulo">Machado de Assis</h3>
                <p class="card-descricao">A clássica narrativa sobre Bentinho, Capitu e o mistério da traição.</p>
                <a href="#" class="card-botao"><i class="fa-solid fa-cart-shopping"></i> Comprar Livro</a>
            </div>
        </div>

        <div class="card">
            <div class="card-imagem">
                <img src="{{ url_for('static', filename='imagens/srdasmoscas.jpg') }}" alt="Senhor das Moscas">
            </div>
            <div class="card-conteudo">
                <h2 class="card-titulo">Senhor das Moscas</h2>
                <h3 class="card-subtitulo">William Golding</h3>
                <p class="card-descricao">Um grupo de meninos isolados revela a luta entre civilização e selvageria.</p>
                <a href="#" class="card-botao"><i class="fa-solid fa-cart-shopping"></i> Comprar Livro</a>
            </div>
        </div>

        <div class="card">
            <div class="card-imagem">
                <img src="{{ url_for('static', filename='imagens/percyJack.jpg') }}" alt="Percy Jackson">
            </div>
            <div class="card-conteudo">
                <h2 class="card-titulo">Percy Jackson</h2>
                <h3 class="card-subtitulo">Rick Riordan</h3>
                <p class="card-descricao">Um jovem descobre ser filho de um deus grego e embarca em aventuras míticas para salvar o mundo.</p>
                <a href="#" class="card-botao"><i class="fa-solid fa-cart-shopping"></i> Comprar Livro</a>
            </div>
        </div>
    </div>

    <footer class="rodape-site">
        <div class="colunas-links">
            <div class="rodape-coluna">
                <h4>Saiba mais</h4>
                <ul>
                    <li><a href="#">Quem somos</a></li>
                    <li><a href="#">Termos de uso</a></li>
                    <li><a href="#">Fale conosco</a></li>
                </ul>
            </div>
            <div class="rodape-coluna">
                <h4>Explore</h4>
                <ul>
                    <li><a href="#">Livros</a></li>
                    <li><a href="#">Autores</a></li>
                    <li><a href="#">Editoras</a></li>
                </ul>
            </div>
        </div>
        <div class="rodape-inferior">
            <p>&copy; 2025 BiblioTech. Todos os direitos reservados.</p>
        </div>
    </footer>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const form = document.querySelector('.chat-form');
            const input = document.querySelector('.chat-form input[name="pergunta"]');
            const chatBox = document.querySelector('.chat-respostas');
    
            if (input) input.focus();
    
            // Mantém o foco no campo após enviar a mensagem
            form.addEventListener('submit', function() {
                setTimeout(() => input.focus(), 100);
            });
    
            // Rola automaticamente até o final (última mensagem)
            if (chatBox) {
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        });
    </script> 
</body>
</html>